<!doctype html>
<html lang="en">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-27834075-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-27834075-1');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="description" itemprop="description" content="COVID-19 Stats" />
  <meta itemprop="name" content="COVID-19 Stats" />
  <meta itemprop="image" content="https://sig.gy/covid19stats/thumbnail.png" />

  <!-- Facebook Open Graph -->
  <meta property="og:title" content="COVID-19 Stats" />
  <meta property="og:description" content="COVID-19 Stats" />
  <meta property="og:url" content="https://sig.gy/covid19stats/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://sig.gy/covid19stats/thumbnail.png" />
  <meta property="og:site_name" content="COVID-19 Stats" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="COVID-19 Stats" />
  <meta name="twitter:title" content="COVID-19 Stats" />
  <meta name="twitter:description" content="COVID-19 Stats" />
  <meta name="twitter:image:src" content="https://sig.gy/covid19stats/thumbnail.png" />
  <meta name="twitter:url" content="https://sig.gy/covid19stats/" />

  <title>COVID-19 Stats</title>

  <link rel="canonical" href="https://sig.gy/covid19stats/" />

  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable@8.0.0/dist/handsontable.full.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/c3@0.7.20/c3.min.css">
  <link rel="stylesheet" href="covid19stats.css">
</head>
<body>
  <header>
    <h1>COVID-19 Stats</h1>

    <a href="https://github.com/siggy/covid19stats" class="github-corner" aria-label="Fork me on Github" title="Fork me on Github">
      <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>
    </a>
  </header>

  <main>
    <div class="load-container">
      <div class="loader">Loading...</div>
    </div>

    <div class="big-numbers">
      <div class="geo" id="big-county">
        <div class="name">San Francisco</div>
        <div class="cases stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">cases</div>
        </div>
        <div class="deaths stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">deaths</div>
        </div>
      </div>
      <div class="geo" id="big-state">
        <div class="name">California</div>
        <div class="cases stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">cases</div>
        </div>
        <div class="deaths stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">deaths</div>
        </div>
      </div>
      <div class="geo" id="big-country">
        <div class="name">US</div>
        <div class="cases stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">cases</div>
        </div>
        <div class="deaths stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">deaths</div>
        </div>
      </div>
      <div class="geo" id="big-global">
        <div class="name">Global</div>
        <div class="cases stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">cases</div>
        </div>
        <div class="deaths stats">
          <div class="new">New: +0</div>
          <div class="total">0</div>
          <div class="percent">0.0%</div>
          <div class="label">deaths</div>
        </div>
      </div>
    </div>

    <div class="tab">
      <button class="tablink active" onclick="openTab(event, 'state')">US States</button>
      <button class="tablink" onclick="openTab(event, 'county')">US Counties</button>
      <button class="tablink" onclick="openTab(event, 'country')">Provinces/Countries</button>
    </div>

    <div id="state" class="tabcontent active">
      <div class="data">
        <div class="dropdown-row">
          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Top 10 <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="showTop(event, 'state', '10')"  class="end">Top 10</button>
              <button onclick="showTop(event, 'state', '30')"             >Top 30</button>
              <button onclick="showTop(event, 'state', 'all')" class="end">Show all</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              New Cases (7d avg) <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="setField(event, 'state', 'cases')"                                  class="end">Cases</button>
              <button onclick="setField(event, 'state', 'deaths')"                                            >Deaths</button>
              <button onclick="setField(event, 'state', 'newCases')"                                          >New Cases</button>
              <button onclick="setField(event, 'state', 'newDeaths')"                                         >New Deaths</button>
              <button onclick="setField(event, 'state', 'avgNewCases')"                                       >New Cases (7d avg)</button>
              <button onclick="setField(event, 'state', 'avgNewDeaths')"                                      >New Deaths (7d avg)</button>

              <button onclick="setField(event, 'state', 'tests')"                                             >Tests</button>
              <button onclick="setNonNormalizedField(event, 'state', 'positiveTestPercent')"                  >Test Pos %</button>
              <button onclick="setField(event, 'state', 'avgNewTests')"                                       >New Tests (7d avg)</button>
              <button onclick="setNonNormalizedField(event, 'state', 'avgNewPositiveTestPercent')" class="end">New Test Pos % (7d avg)</button>
            </div>
          </div>

          <div class="dropdown normalized">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              /1M <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="showNormalized(event, 'state', false)" class="end">Total</button>
              <button onclick="showNormalized(event, 'state', true)"  class="end">/1M</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Linear <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="setAxis(event, 'state', 'log')"     class="end">Log</button>
              <button onclick="setAxis(event, 'state', 'linear')"  class="end">Linear</button>
            </div>
          </div>

        </div>
        <div id="state-chart" class="chart"></div>
        <h3 id="state-collapsible" class="collapsible">
          <button aria-expanded="false">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 10 10">
              <rect class="vert" height="8" width="2" y="1" x="4"/>
              <rect height="2" width="8" y="4" x="1"/>
            </svg>
            Show table
          </button>
        </h3>
        <div hidden class="collapsible-content">
          <div id="state-table" class="table"></div>
          <button id="state-export" class="export-btn">Download State CSV</button>
        </div>
      </div>
    </div>

    <div id="county" class="tabcontent">
      <div class="data">
        <div class="dropdown-row">
          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Top 10 <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="showTop(event, 'county', '10')"  class="end">Top 10</button>
              <button onclick="showTop(event, 'county', '30')"             >Top 30</button>
              <button onclick="showTop(event, 'county', '50')"             >Top 50</button>
              <button onclick="showTop(event, 'county', '100')"            >Top 100</button>
              <button onclick="showTop(event, 'county', 'all')" class="end">Show all</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              New Cases (7d avg) <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="setField(event, 'county', 'cases')"        class="end">Cases</button>
              <button onclick="setField(event, 'county', 'deaths')"                  >Deaths</button>
              <button onclick="setField(event, 'county', 'newCases')"                >New Cases</button>
              <button onclick="setField(event, 'county', 'newDeaths')"               >New Deaths</button>
              <button onclick="setField(event, 'county', 'avgNewCases')"             >New Cases (7d avg)</button>
              <button onclick="setField(event, 'county', 'avgNewDeaths')" class="end">New Deaths (7d avg)</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Total <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="showNormalized(event, 'county', false)" class="end">Total</button>
              <button onclick="showNormalized(event, 'county', true)"  class="end">/1M</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Log <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="setAxis(event, 'county', 'log')"     class="end">Log</button>
              <button onclick="setAxis(event, 'county', 'linear')"  class="end">Linear</button>
            </div>
          </div>

        </div>
        <div id="county-chart" class="chart"></div>
        <h3 id="county-collapsible" class="collapsible">
          <button aria-expanded="false">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 10 10">
              <rect class="vert" height="8" width="2" y="1" x="4"/>
              <rect height="2" width="8" y="4" x="1"/>
            </svg>
            Show table
          </button>
        </h3>
        <div hidden class="collapsible-content">
          <div id="county-table" class="table"></div>
          <button id="county-export" class="export-btn">Download County CSV</button>
        </div>
      </div>

      <ul id="county-state-checks" class="checkbox"></ul>
    </div>

    <div id="country" class="tabcontent">
      <div class="data">
        <div class="dropdown-row">
          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Top 10 <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="showTop(event, 'country', '10')"  class="end">Top 10</button>
              <button onclick="showTop(event, 'country', '30')"             >Top 30</button>
              <button onclick="showTop(event, 'country', '50')"             >Top 50</button>
              <button onclick="showTop(event, 'country', '100')"            >Top 100</button>
              <button onclick="showTop(event, 'country', 'all')" class="end">Show all</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              New Cases (7d avg) <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="setField(event, 'country', 'cases')"        class="end">Cases</button>
              <button onclick="setField(event, 'country', 'deaths')"                  >Deaths</button>
              <button onclick="setField(event, 'country', 'newCases')"                >New Cases</button>
              <button onclick="setField(event, 'country', 'newDeaths')"               >New Deaths</button>
              <button onclick="setField(event, 'country', 'avgNewCases')"             >New Cases (7d avg)</button>
              <button onclick="setField(event, 'country', 'avgNewDeaths')" class="end">New Deaths (7d avg)</button>
            </div>
          </div>


          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Total <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="showNormalized(event, 'country', false)" class="end">Total</button>
              <button onclick="showNormalized(event, 'country', true)"  class="end">/1M</button>
            </div>
          </div>

          <div class="dropdown">
            <button class="dropdown-button" onclick="dropDownToggle(event)">
              Log <span class="dropdown-chevron">&#9660;</span>
            </button>
            <div class="dropdown-content">
              <button onclick="setAxis(event, 'country', 'log')"     class="end">Log</button>
              <button onclick="setAxis(event, 'country', 'linear')"  class="end">Linear</button>
            </div>
          </div>

        </div>
        <div id="country-chart" class="chart"></div>
        <h3 id="country-collapsible" class="collapsible">
          <button aria-expanded="false">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 10 10">
              <rect class="vert" height="8" width="2" y="1" x="4"/>
              <rect height="2" width="8" y="4" x="1"/>
            </svg>
            Show table
          </button>
        </h3>
        <div hidden class="collapsible-content">
          <div id="country-table" class="table"></div>
          <button id="country-export" class="export-btn">Download Country CSV</button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <span>Data courtesy of</span>
    <ul>
      <li>
        <a href='https://github.com/nytimes/covid-19-data'>github.com/nytimes/covid-19-data</a>
      </li>
      <li>
        <a href='https://www2.census.gov/programs-surveys/popest/datasets/2010-2019/counties/totals'>www2.census.gov/programs-surveys/popest/datasets/2010-2019/counties/totals</a>
      </li>
      <li>
        <a href='https://covidtracking.com'>covidtracking.com</a>
      </li>
      <li>
        <a href='https://systems.jhu.edu/research/public-health/ncov'>systems.jhu.edu/research/public-health/ncov</a>
      </li>
      <li>
        <a href='https://data.worldbank.org'>data.worldbank.org</a>
      </li>
      <li>
        <a href='https://open.canada.ca'>open.canada.ca</a>
      </li>
      <li>
        <a href='http://www.population.net.au/states'>www.population.net.au/states</a>
      </li>
    </ul>
  </footer>

  <script defer src="https://cdn.jsdelivr.net/npm/handsontable@8.0.0/dist/handsontable.full.min.js"></script>
  <script defer src="tables.js"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/d3@5.16.0/dist/d3.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/c3@0.7.20/c3.min.js"></script>
  <script defer src="charts.js"></script>

  <script defer src="us-state-abbreviations.js"></script>
  <script defer src="covid19stats.js"></script>
</body>
</html>
